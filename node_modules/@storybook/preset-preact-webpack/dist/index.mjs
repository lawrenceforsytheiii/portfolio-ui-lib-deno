import { dirname, join } from 'path';

var __require=(x=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(x,{get:(a,b)=>(typeof require<"u"?require:a)[b]}):x)(function(x){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+x+'" is not supported')});var wrapForPnP=input=>dirname(__require.resolve(join(input,"package.json"))),babel=config=>({...config,plugins:[[__require.resolve("@babel/plugin-transform-react-jsx"),{importSource:"preact",runtime:"automatic"}],...(config.plugins||[]).filter(p=>{let name=Array.isArray(p)?p[0]:p;return typeof name=="string"?!name.includes("plugin-transform-react-jsx"):!0})],overrides:[{exclude:"**/node_modules/**",presets:[__require.resolve("@babel/preset-typescript")]}]}),webpackFinal=config=>({...config,resolve:{...config.resolve,alias:{...config.resolve?.alias||{},react:wrapForPnP("preact/compat"),"react-dom/test-utils":wrapForPnP("preact/test-utils"),"react-dom":wrapForPnP("preact/compat"),"react/jsx-runtime":wrapForPnP("preact/jsx-runtime")}}});

export { babel, webpackFinal };
